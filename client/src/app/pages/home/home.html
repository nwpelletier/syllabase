<div [class.isDark]="themeService.isDark">
  <h1>Home</h1>
  <p>{{ backendMessage }}</p>

  <!-- Add Piece Form (existing) -->
  <h2>Add a new piece</h2>
  <form (ngSubmit)="addPiece()">
    <label>
      Piece Name:
      <input type="text" [(ngModel)]="pieceName" name="pieceName" />
    </label>

    <label>
      Composer:
      <select [(ngModel)]="selectedComposerId" name="composer">
        <option [ngValue]="null">-- Select Composer --</option>
        <option *ngFor="let composer of composers" [ngValue]="composer.id">
          {{ composer.first_name }} {{ composer.last_name }}
        </option>
      </select>
    </label>

    <button type="submit" [disabled]="!isFormValid">Add Piece</button>
  </form>

  <h2>Existing Pieces:</h2>
  <ul>
    <li *ngFor="let piece of pieces">
      {{ piece.name }}
      <span *ngIf="piece.collection"> (Collection: {{ piece.collection.name }}) </span>
      â€” Composer: {{ piece.composer.first_name }} {{ piece.composer.last_name }}
    </li>
  </ul>

  <!-- NEW: Add Composer Form -->
  <h2>Add a new composer</h2>
  <form (ngSubmit)="addComposer()">
    <input
      type="text"
      placeholder="First Name"
      [(ngModel)]="newComposer.firstName"
      name="firstName"
      required
    />
    <input
      type="text"
      placeholder="Last Name"
      [(ngModel)]="newComposer.lastName"
      name="lastName"
      required
    />
    <input
      type="number"
      placeholder="Birth Year"
      [(ngModel)]="newComposer.birthYear"
      name="birthYear"
      required
    />
    <input
      type="number"
      placeholder="Death Year"
      [(ngModel)]="newComposer.deathYear"
      name="deathYear"
    />
    <input
      type="text"
      placeholder="Nationality"
      [(ngModel)]="newComposer.nationality"
      name="nationality"
      required
    />
    <button type="submit">Add Composer</button>
  </form>

  <h2>Current Composers</h2>
  <ul>
    <li *ngFor="let composer of composers">
      {{ composer.first_name }} {{ composer.last_name }} ({{ composer.birth_year || '?' }} -
      {{ composer.death_year || '?' }}) {{ composer.nationality }}
    </li>
  </ul>
</div>
